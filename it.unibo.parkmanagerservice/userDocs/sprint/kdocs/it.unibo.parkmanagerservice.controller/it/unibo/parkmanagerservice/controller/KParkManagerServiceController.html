<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en"><head>
    <title>KParkManagerServiceController 1.0 API </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="dc.created" content="2020-03-25">
    <link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
    <link rel="stylesheet" type="text/css" href="../../../../dokka-javadoc-stylesheet.css" title="Style">
    <link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
    <script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
    <script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>

    <script type="text/javascript" src="../../../../search.js"></script>
    <script async type="text/javascript" src="../../../../module-search-index.js"></script>
    <script async type="text/javascript" src="../../../../package-search-index.js"></script>
    <script async type="text/javascript" src="../../../../type-search-index.js"></script>
    <script async type="text/javascript" src="../../../../member-search-index.js"></script>
    <script async type="text/javascript" src="../../../../tag-search-index.js"></script>
</head><body>
<script type="text/javascript">
var pathtoroot = "../../../../";
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript><header role="banner">
    <nav role="navigation">
        <div class="fixedNav">
            <!-- ========= START OF TOP NAVBAR ======= -->
            <div class="topNav"><a id="navbar.top">
                <!--   -->
            </a>
                <div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a>
                </div>
                <a id="navbar.top.firstrow">
                    <!--   -->
                </a>
                <ul class="navList" title="Navigation">
    <li><a href="../../../../index.html">Overview</a></li>
    
    <li><a href="package-summary.html">Package</a></li>
    
    <li class="navBarCell1Rev">Class</li>
    
    <li><a href="package-tree.html">Tree</a></li>
    
    <li><a href="../../../../deprecated.html">Deprecated</a></li>
    <li><a href="../../../../index-files/index-1.html">Index</a></li>
    <li>Help</li>
</ul></div>
            <div class="subNav">
<ul class="navList" id="allclasses_navbar_top" style="display: block;">
    <li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>

<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" class="ui-autocomplete-input" autocomplete="off" placeholder="Search">
<input type="reset" id="reset" value="reset">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div><!-- ========= END OF TOP NAVBAR ========= -->
        </div>
        <div class="navPadding">&nbsp;</div>
        <script type="text/javascript"><!--
        $('.navPadding').css('padding-top', $('.fixedNav').css("height"));
        //-->
        </script>
    </nav>
</header>

<main role="main">
    <div class="header">
        <div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html"></a></div>
        <h2 title="Class KParkManagerServiceController" class="title">Class KParkManagerServiceController</h2>
    </div>
    <div class="contentContainer">
        <!-- <ul class="inheritance">
            <li>java.lang.Object</li>
            <li>
                <ul class="inheritance">
                    <li>adaptation.Adaptation</li>
                </ul>
            </li>
        </ul> TODO inheritance tree -->
        <div class="description">
            <ul class="blockList">
                <li class="blockList">
                    
                    <dl>
                        <dt>All Implemented Interfaces:</dt>
                        <dd>
                            
                            <code>it.unibo.parkmanagerservice.controller.ParkManagerServiceController</code>
                            
                            
                        </dd>
                    </dl>
                    
                    <hr>
                    <pre class="wrap-overflow">

public final class <span class="typeNameLabel"><a href=KParkManagerServiceController.html>KParkManagerServiceController</a></span>
 implements <a href=ParkManagerServiceController.html>ParkManagerServiceController</a>
                    </pre>
                    <div class="block"><p>The implementation of <a href=ParkManagerServiceController.html>ParkManagerServiceController</a> that uses <a href=../persistence/UserRepository.html>UserRepository</a>, <a href=../persistence/ParkingSlotRepository.html>ParkingSlotRepository</a>, <a href=../persistence/DoorQueue.html>DoorQueue</a> and <a href=../bean/DoorsManager.html>DoorsManager</a>.</p></div>
                </li>
            </ul>
        </div>
        <div class="summary">
            <ul class="blockList">
                <li class="blockList">
                <!-- ======== NESTED CLASS SUMMARY ======== -->
                    
                    <!-- =========== FIELD SUMMARY =========== -->
                    
                    <!-- ======== CONSTRUCTOR SUMMARY ======== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.summary">
                                <!--   -->
                            </a>
                                <h3>Constructor Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tbody>
                                        <tr>
                                            <th class="colFirst" scope="col">Constructor</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>

                                        
                                            <tr class="altColor">
                                                <th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a
                                                        href="#KParkManagerServiceController(UserRepository,ParkingSlotRepository,DoorQueue,DoorQueue,DoorsManager)">KParkManagerServiceController</a></span>(<a href=../persistence/UserRepository.html>UserRepository</a> userRepo, <a href=../persistence/ParkingSlotRepository.html>ParkingSlotRepository</a> slotRepo, <a href=../persistence/DoorQueue.html>DoorQueue</a> indoorQueue, <a href=../persistence/DoorQueue.html>DoorQueue</a> outdoorQueue, <a href=../bean/DoorsManager.html>DoorsManager</a> doors)</code></th>
                                                <td class="colLast"></td>
                                            </tr>
                                        

                                        </tbody>
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- =========== ENUM CONSTANT SUMMARY =========== -->
                    
                    <!-- ========== METHOD SUMMARY =========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.summary">
                                <!--   -->
                            </a>
                                <h3>Method Summary</h3>
                                <div class="memberSummary">
                                    <div role="tablist" aria-orientation="horizontal">
                                        <button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button>
                                        <!-- TODO: Instance and Concrete Methods #1118 -->
                                    </div>
                                    <div id="memberSummary_tabpanel" role="tabpanel">
                                    <table aria-labelledby="t0">
                                        <tr>
                                            <th class="colFirst" scope="col">Modifier and Type</th>
                                            <th class="colSecond" scope="col">Method</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        
                                        <tr id="i0" class="altColor">
                                            <td class="colFirst"><code><a href=../bean/User.html>User</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#createUser(String,String,String)>createUser</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> name, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> surname, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail) </code>
                                            </th>
                                            <td class="colLast">Create a user and save it into the data structures of the system.</td>
                                        </tr>
                                        
                                        <tr id="i1" class="rowColor">
                                            <td class="colFirst"><code><a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html>Unit</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#destroyUser(User)>destroyUser</a>(<a href=../bean/User.html>User</a> user) </code>
                                            </th>
                                            <td class="colLast">Destroy a user that is already present in the data structures of the system.</td>
                                        </tr>
                                        
                                        <tr id="i2" class="altColor">
                                            <td class="colFirst"><code><a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html>Long</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#assignSlotToUser(User)>assignSlotToUser</a>(<a href=../bean/User.html>User</a> user) </code>
                                            </th>
                                            <td class="colLast">Assign and return a slotnum to the user passed as argument.</td>
                                        </tr>
                                        
                                        <tr id="i3" class="rowColor">
                                            <td class="colFirst"><code><a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html>Boolean</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#reserveDoorForUserOrEnqueue(DoorType,User)>reserveDoorForUserOrEnqueue</a>(<a href=../bean/DoorType.html>DoorType</a> door, <a href=../bean/User.html>User</a> user) </code>
                                            </th>
                                            <td class="colLast">Reserve the door passed as argument to the specified user, if possibile.</td>
                                        </tr>
                                        
                                        <tr id="i4" class="altColor">
                                            <td class="colFirst"><code><a href=../bean/User.html>User</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#reserveDoorForNextUser(DoorType)>reserveDoorForNextUser</a>(<a href=../bean/DoorType.html>DoorType</a> door) </code>
                                            </th>
                                            <td class="colLast">Takes an user from the queue associated to the <a href=KParkManagerServiceController.html#reserveDoorForNextUser(DoorType)>door</a> trying to reserve this door to him.</td>
                                        </tr>
                                        
                                        <tr id="i5" class="rowColor">
                                            <td class="colFirst"><code><a href=../bean/User.html>User</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#setSomeoneOnDoor(DoorType)>setSomeoneOnDoor</a>(<a href=../bean/DoorType.html>DoorType</a> door) </code>
                                            </th>
                                            <td class="colLast">This method takes and returns the user who the <a href=KParkManagerServiceController.html#setSomeoneOnDoor(DoorType)>door</a> is reserved and set the door to <a href=../bean/DoorState.html#OCCUPIED>DoorState.OCCUPIED</a> by him.</td>
                                        </tr>
                                        
                                        <tr id="i6" class="altColor">
                                            <td class="colFirst"><code><a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html>Unit</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#setFreeDoor(DoorType)>setFreeDoor</a>(<a href=../bean/DoorType.html>DoorType</a> door) </code>
                                            </th>
                                            <td class="colLast">Set the specified <a href=KParkManagerServiceController.html#setFreeDoor(DoorType)>door</a> to <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> and remove all user that has reserved or occupied the door.</td>
                                        </tr>
                                        
                                        <tr id="i7" class="rowColor">
                                            <td class="colFirst"><code><a href=../bean/User.html>User</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#setCarOfUserAtIndoorParked()>setCarOfUserAtIndoorParked</a>() </code>
                                            </th>
                                            <td class="colLast">Set the car of the the user at the indoor as parked.</td>
                                        </tr>
                                        
                                        <tr id="i8" class="altColor">
                                            <td class="colFirst"><code><a href=../bean/User.html>User</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#setCarOfUserAtOutdoorLeaved()>setCarOfUserAtOutdoorLeaved</a>() </code>
                                            </th>
                                            <td class="colLast">Set the car of the user at the outdoor as lived.</td>
                                        </tr>
                                        
                                        <tr id="i9" class="rowColor">
                                            <td class="colFirst"><code><a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/User.html>User</a>, <a href=ParkManagerError.html>ParkManagerError</a>&gt;</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#assignTokenToUserAtIndoor(String,String)>assignTokenToUserAtIndoor</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> slotnum, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail) </code>
                                            </th>
                                            <td class="colLast">Assign and return a token to the user that has occupied the outdoor.</td>
                                        </tr>
                                        
                                        <tr id="i10" class="altColor">
                                            <td class="colFirst"><code><a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/ParkingSlot.html>ParkingSlot</a>, <a href=ParkManagerError.html>ParkManagerError</a>&gt;</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#analyzeToken(String,String)>analyzeToken</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> token, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail) </code>
                                            </th>
                                            <td class="colLast">Analyze a token in order to verify its fairness.</td>
                                        </tr>
                                        
                                        <tr id="i11" class="rowColor">
                                            <td class="colFirst"><code><a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/User.html>User</a>, <a href=../bean/ParkingSlot.html>ParkingSlot</a>&gt;</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#freeSlotUsedByUserAtOutdoor()>freeSlotUsedByUserAtOutdoor</a>() </code>
                                            </th>
                                            <td class="colLast">This method makes the slot associated to the user who is at the outdoor free.</td>
                                        </tr>
                                        
                                        <tr id="i12" class="altColor">
                                            <td class="colFirst"><code><a href=../bean/DoorsManager.html>DoorsManager</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#getDoorsManager()>getDoorsManager</a>() </code>
                                            </th>
                                            <td class="colLast">Return the <a href=../bean/DoorsManager.html>DoorsManager</a> used by the controller.</td>
                                        </tr>
                                        
                                        <tr id="i13" class="rowColor">
                                            <td class="colFirst"><code><a href=../persistence/DoorQueue.html>DoorQueue</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#getDoorQueue(DoorType)>getDoorQueue</a>(<a href=../bean/DoorType.html>DoorType</a> door) </code>
                                            </th>
                                            <td class="colLast">Return the <a href=../persistence/DoorQueue.html>DoorQueue</a> associated with the <a href=KParkManagerServiceController.html#getDoorQueue(DoorType)>door</a> passed as argument.</td>
                                        </tr>
                                        
                                        <tr id="i14" class="altColor">
                                            <td class="colFirst"><code><a href=../bean/ParkingSlot.html>ParkingSlot</a></code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><a href=KParkManagerServiceController.html#getSlotReservedForUser(User)>getSlotReservedForUser</a>(<a href=../bean/User.html>User</a> user) </code>
                                            </th>
                                            <td class="colLast">Return the <a href=../bean/ParkingSlot.html>ParkingSlot</a> reserved to the <a href=KParkManagerServiceController.html#getSlotReservedForUser(User)>user</a> passed as argument or null if no slot is reserved for the user.</td>
                                        </tr>
                                        
                                        </tbody>
                                    </table>
                                </div>
                                <ul class="blockList">
                                
                                    <li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
                                        <!--   -->
                                    </a>
                                        <h3>Methods inherited from class&nbsp;java.lang.Object</h3>
                                        <code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString,
                                            wait, wait, wait</code></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                </li>
            </ul>
        </div>
        <div class="details">
            <ul class="blockList">
                <li class="blockList">
                    <!-- ========= CONSTRUCTOR DETAIL ======== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.detail">
                                <!--   -->
                            </a>
                                <h3>Constructor Detail</h3>
                                
                                <a name="KParkManagerServiceController(UserRepository,ParkingSlotRepository,DoorQueue,DoorQueue,DoorsManager)"></a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>KParkManagerServiceController</h4>
                                        <pre>KParkManagerServiceController(<a href=../persistence/UserRepository.html>UserRepository</a> userRepo, <a href=../persistence/ParkingSlotRepository.html>ParkingSlotRepository</a> slotRepo, <a href=../persistence/DoorQueue.html>DoorQueue</a> indoorQueue, <a href=../persistence/DoorQueue.html>DoorQueue</a> outdoorQueue, <a href=../bean/DoorsManager.html>DoorsManager</a> doors)</pre>
                                        <div class="block"></div>
                                        
                                    </li>
                                </ul>
                                
                            </li>
                        </ul>
                    </section>
                    
                    <!-- ============ METHOD DETAIL ========== -->
                    
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.detail">
                                <!--   -->
                            </a>
                                <h3>Method Detail</h3>
                                
                                <a id="createUser(String,String,String)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>createUser</h4>
                                        <pre class="methodSignature"> <a href=../bean/User.html>User</a> <a href=KParkManagerServiceController.html#createUser(String,String,String)>createUser</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> name, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> surname, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail)</pre>
                                        <div class="block"><p>Create a user and save it into the data structures of the system.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>name</code> - the name of the user;</dd>
                                            
                                            
                                            
                                            <dd><code>surname</code> - the surname of the user;</dd>
                                            
                                            
                                            
                                            <dd><code>mail</code> - the mail of the user.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="destroyUser(User)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>destroyUser</h4>
                                        <pre class="methodSignature"> <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html>Unit</a> <a href=KParkManagerServiceController.html#destroyUser(User)>destroyUser</a>(<a href=../bean/User.html>User</a> user)</pre>
                                        <div class="block"><p>Destroy a user that is already present in the data structures of the system. After this call, the user does not exist yet into the data structures.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>user</code> - the user to destroy.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="assignSlotToUser(User)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>assignSlotToUser</h4>
                                        <pre class="methodSignature"> <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html>Long</a> <a href=KParkManagerServiceController.html#assignSlotToUser(User)>assignSlotToUser</a>(<a href=../bean/User.html>User</a> user)</pre>
                                        <div class="block"><p>Assign and return a slotnum to the user passed as argument. So, this method first searches a free slotnum and then assigns it to the specified user. After this invocation, the found slot is also setted to <a href=../bean/ParkingSlotState.html#RESERVED>ParkingSlotState.RESERVED</a> while the user state is changed to <a href=../bean/UserState.html#INTERESTED>UserState.INTERESTED</a> and the relationship between user and slot is saved. These changes are saved into the data structures of the system.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>user</code> - the user to assign the slotnum.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="reserveDoorForUserOrEnqueue(DoorType,User)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>reserveDoorForUserOrEnqueue</h4>
                                        <pre class="methodSignature"> <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html>Boolean</a> <a href=KParkManagerServiceController.html#reserveDoorForUserOrEnqueue(DoorType,User)>reserveDoorForUserOrEnqueue</a>(<a href=../bean/DoorType.html>DoorType</a> door, <a href=../bean/User.html>User</a> user)</pre>
                                        <div class="block"><p>Reserve the door passed as argument to the specified user, if possibile. If the door is not free, the user is queued and his state is set to <a href=../bean/UserState.html#INTERESTED>UserState.INTERESTED</a> or <a href=../bean/UserState.html#WANTS_TO_GO>UserState.WANTS_TO_GO</a> depending on the door required. All changes of user and door state are persistent, also the association beetwen the door reservation and the relative user.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>door</code> - the required door;</dd>
                                            
                                            
                                            
                                            <dd><code>user</code> - the user that wants door reservation</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="reserveDoorForNextUser(DoorType)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>reserveDoorForNextUser</h4>
                                        <pre class="methodSignature"> <a href=../bean/User.html>User</a> <a href=KParkManagerServiceController.html#reserveDoorForNextUser(DoorType)>reserveDoorForNextUser</a>(<a href=../bean/DoorType.html>DoorType</a> door)</pre>
                                        <div class="block"><p>Takes an user from the queue associated to the <a href=KParkManagerServiceController.html#reserveDoorForNextUser(DoorType)>door</a> trying to reserve this door to him. If the door is not at state <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> or if no user are in the queue, this method has no effect then returns null. In addition to this, this method check if the state of the user is coherent (then if he is really waiting the door).</p><p>If the door is <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> and there is a user waiting for it, this method reserve the door to the user also updating its state in the data structures (the user state becomes <a href=../bean/UserState.html#OUTDOOR_RESERVED>UserState.OUTDOOR_RESERVED</a> or <a href=../bean/UserState.html#INDOOR_RESERVED>UserState.INDOOR_RESERVED</a>, the door <a href=../bean/DoorState.html#RESERVED>DoorState.RESERVED</a> and the association within door reservation and user is saved) and returns the user who has the reservation.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>door</code> - the door wanted.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="setSomeoneOnDoor(DoorType)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>setSomeoneOnDoor</h4>
                                        <pre class="methodSignature"> <a href=../bean/User.html>User</a> <a href=KParkManagerServiceController.html#setSomeoneOnDoor(DoorType)>setSomeoneOnDoor</a>(<a href=../bean/DoorType.html>DoorType</a> door)</pre>
                                        <div class="block"><p>This method takes and returns the user who the <a href=KParkManagerServiceController.html#setSomeoneOnDoor(DoorType)>door</a> is reserved and set the door to <a href=../bean/DoorState.html#OCCUPIED>DoorState.OCCUPIED</a> by him. If no user has requested the door reservation, this method returns null.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>door</code> - the door that has been occupied.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="setFreeDoor(DoorType)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>setFreeDoor</h4>
                                        <pre class="methodSignature"> <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html>Unit</a> <a href=KParkManagerServiceController.html#setFreeDoor(DoorType)>setFreeDoor</a>(<a href=../bean/DoorType.html>DoorType</a> door)</pre>
                                        <div class="block"><p>Set the specified <a href=KParkManagerServiceController.html#setFreeDoor(DoorType)>door</a> to <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> and remove all user that has reserved or occupied the door. After this invocation, the door is completely free.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>door</code> - the door to be free.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="setCarOfUserAtIndoorParked()">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>setCarOfUserAtIndoorParked</h4>
                                        <pre class="methodSignature"> <a href=../bean/User.html>User</a> <a href=KParkManagerServiceController.html#setCarOfUserAtIndoorParked()>setCarOfUserAtIndoorParked</a>()</pre>
                                        <div class="block"><p>Set the car of the the user at the indoor as parked. This method checks if there is an user on the indoor (the door must be <a href=../bean/DoorState.html#OCCUPIED>DoorState.OCCUPIED</a>) then marks the door as <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> and the user as <a href=../bean/UserState.html#PARKED>UserState.PARKED</a>. In addition, this method set the slot associated to the user as occupied. It returns the user who has been parked if he was previously on the door, null otherwise. The state changes of the door, the user and the slot are persistent.</p></div>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="setCarOfUserAtOutdoorLeaved()">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>setCarOfUserAtOutdoorLeaved</h4>
                                        <pre class="methodSignature"> <a href=../bean/User.html>User</a> <a href=KParkManagerServiceController.html#setCarOfUserAtOutdoorLeaved()>setCarOfUserAtOutdoorLeaved</a>()</pre>
                                        <div class="block"><p>Set the car of the user at the outdoor as lived. This method checks if there is an user on the outdoor (the door must be <a href=../bean/DoorState.html#OCCUPIED>DoorState.OCCUPIED</a>) then marks the door as <a href=../bean/DoorState.html#FREE>DoorState.FREE</a> and the user as <a href=../bean/UserState.html#PICKEDUP>UserState.PICKEDUP</a>. It returns the user who leaved the door if he was previously on it, null otherwise. Notice that this method does not touch the slot previosly associated to the user (see <a href=KParkManagerServiceController.html#freeSlotUsedByUserAtOutdoor()>freeSlotUsedByUserAtOutdoor</a> to do this).</p></div>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="assignTokenToUserAtIndoor(String,String)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>assignTokenToUserAtIndoor</h4>
                                        <pre class="methodSignature"> <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/User.html>User</a>, <a href=ParkManagerError.html>ParkManagerError</a>&gt; <a href=KParkManagerServiceController.html#assignTokenToUserAtIndoor(String,String)>assignTokenToUserAtIndoor</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> slotnum, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail)</pre>
                                        <div class="block"><p>Assign and return a token to the user that has occupied the outdoor. The association between slotnum and user is persistent and saved into the data structure of the system. This method can also return serveral errors:</p><ul><li><p><a href=ErrorType.html#DOOR_NOT_RESERVED>ErrorType.DOOR_NOT_RESERVED</a> if the indoor has not previously been reserved or occupied;</p></li><li><p><a href=ErrorType.html#NO_RESERVATION_FOR_USER>ErrorType.NO_RESERVATION_FOR_USER</a> if the user has not taken a slotnum first;</p></li><li><p><a href=ErrorType.html#INVALID_MAIL>ErrorType.INVALID_MAIL</a> is the given mail is different from that of the user that has reserved the indoor;</p></li><li><p><a href=ErrorType.html#NO_USER_AT_DOOR>ErrorType.NO_USER_AT_DOOR</a> if the door is not at the state <a href=../bean/DoorState.html#OCCUPIED>DoorState.OCCUPIED</a>, then if the user has not positioned his car to the indoor.</p></li></ul><p>If all is correct and everything is alright with no error, this method return a <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a> with also the first argument that corresponds to the user who has the new token. Otherwise, if was an error, the second argument of the returned pair is not null. If the user receive the token, the association between user and token is saved to the data structure of the system.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>slotnum</code> - the slotnum obtained with the Notify Interest;</dd>
                                            
                                            
                                            
                                            <dd><code>mail</code> - the mail of the user that requests the token.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="analyzeToken(String,String)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>analyzeToken</h4>
                                        <pre class="methodSignature"> <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/ParkingSlot.html>ParkingSlot</a>, <a href=ParkManagerError.html>ParkManagerError</a>&gt; <a href=KParkManagerServiceController.html#analyzeToken(String,String)>analyzeToken</a>(<a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> token, <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/String.html>String</a> mail)</pre>
                                        <div class="block"><p>Analyze a token in order to verify its fairness. If the token is valid, tho slot associated to the user who has the token is set to <a href=../bean/ParkingSlotState.html#ALMOST_FREE>ParkingSlotState.ALMOST_FREE</a> because of this operation must be invoked only when an user wants to pick up his car. This update is persistent. This method returns a <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a> containing the <a href=../bean/ParkingSlot.html>ParkingSlot</a> of the user who has the token and, eventually, en error that is null if everything go alright. This method can return a not null error if:</p><ul><li><p><a href=ErrorType.html#INVALID_TOKEN>ErrorType.INVALID_TOKEN</a>: the token is not valid, so no parking slot is found or the given mail is not that of the user associated to the token.</p></li></ul></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>token</code> - the token to analyze;</dd>
                                            
                                            
                                            
                                            <dd><code>mail</code> - the mail of the user who has the token.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="freeSlotUsedByUserAtOutdoor()">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>freeSlotUsedByUserAtOutdoor</h4>
                                        <pre class="methodSignature"> <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a>&lt;<a href=../bean/User.html>User</a>, <a href=../bean/ParkingSlot.html>ParkingSlot</a>&gt; <a href=KParkManagerServiceController.html#freeSlotUsedByUserAtOutdoor()>freeSlotUsedByUserAtOutdoor</a>()</pre>
                                        <div class="block"><p>This method makes the slot associated to the user who is at the outdoor free. It should be called only after the transport trolley has effectively taken out the car by the slot. After the invoke of this method, the selected slot was set to <a href=../bean/ParkingSlotState.html#FREE>ParkingSlotState.FREE</a> and the relationship between it and the previously occupant user is deleted. These updates are persistent.</p><p>It returns a <a href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html>Pair</a> containing the user that was occupying the slot before this invoke and the same slot. If no user was at the indoor the returned pair contains two null value while if the user - for some internal error - is not associated to a slot, the pair contains the found user but a null slot.</p></div>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="getDoorsManager()">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>getDoorsManager</h4>
                                        <pre class="methodSignature"> <a href=../bean/DoorsManager.html>DoorsManager</a> <a href=KParkManagerServiceController.html#getDoorsManager()>getDoorsManager</a>()</pre>
                                        <div class="block"><p>Return the <a href=../bean/DoorsManager.html>DoorsManager</a> used by the controller.</p></div>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="getDoorQueue(DoorType)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockList"
                                          >
                                    <li class="blockList">
                                        <h4>getDoorQueue</h4>
                                        <pre class="methodSignature"> <a href=../persistence/DoorQueue.html>DoorQueue</a> <a href=KParkManagerServiceController.html#getDoorQueue(DoorType)>getDoorQueue</a>(<a href=../bean/DoorType.html>DoorType</a> door)</pre>
                                        <div class="block"><p>Return the <a href=../persistence/DoorQueue.html>DoorQueue</a> associated with the <a href=KParkManagerServiceController.html#getDoorQueue(DoorType)>door</a> passed as argument.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>door</code> - the door who has the queue.</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                                <a id="getSlotReservedForUser(User)">
                                    <!--   -->
                                </a>
                                <ul class=
                                              "blockListLast"
                                          >
                                    <li class="blockList">
                                        <h4>getSlotReservedForUser</h4>
                                        <pre class="methodSignature"> <a href=../bean/ParkingSlot.html>ParkingSlot</a> <a href=KParkManagerServiceController.html#getSlotReservedForUser(User)>getSlotReservedForUser</a>(<a href=../bean/User.html>User</a> user)</pre>
                                        <div class="block"><p>Return the <a href=../bean/ParkingSlot.html>ParkingSlot</a> reserved to the <a href=KParkManagerServiceController.html#getSlotReservedForUser(User)>user</a> passed as argument or null if no slot is reserved for the user.</p></div>
                                        
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            
                                            
                                            <dd><code>user</code> - the user who has the slot reserved</dd>
                                            
                                            
                                        </dl>
                                        
                                        <!-- TODO missing return annotation -->
                                    </li>
                                </ul>
                                
                            </li>
                        </ul>
                    </section>
                    
                </li>
            </ul>
        </div>
    </div>
</main>
<footer role="contentinfo">
    <nav role="navigation">
        <!-- ======= START OF BOTTOM NAVBAR ====== -->
        <div class="bottomNav"><a id="navbar.bottom">
            <!--   -->
        </a>
            <div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a>
            </div>
            <a id="navbar.bottom.firstrow">
                <!--   -->
            </a>
            <ul class="navList" title="Navigation">
    <li><a href="../../../../index.html">Overview</a></li>
    
    <li><a href="package-summary.html">Package</a></li>
    
    <li class="navBarCell1Rev">Class</li>
    
    <li><a href="package-tree.html">Tree</a></li>
    
    <li><a href="../../../../deprecated.html">Deprecated</a></li>
    <li><a href="../../../../index-files/index-1.html">Index</a></li>
    <li>Help</li>
</ul></div>
        <a id="skip.navbar.bottom">
            <!--   -->
        </a>
        <div class="subNav">
<ul class="navList" id="allclasses_navbar_top" style="display: block;">
    <li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div><!-- ======== END OF BOTTOM NAVBAR ======= -->
    </nav>
</footer><ul class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content" id="ui-id-1" tabindex="0"
    style="display: none;"></ul>
<span role="status" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></span>
</body>
</html>
