<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>TemplateToFill</title></head>
    
<body>
<div id="top">
<h1>LABORATORIO DI INGEGNERIA DEI SISTEMI SOFTWARE <font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>SPRINT 1: Virtual Devices Environment</h2>
<div class="remark">

    We decided first to implement the system part used for virtual devices. 
    This sprint aims to create a web application that allow to virtually modify the values of
    all the devices except for the fan, that from requirement can only be modified by the system when the temperature
    excedes a limit or by the manager.

    <h3>Interface</h3>
    The GUI interface must be simple and have all the information and components needed to read and modify the values of 
    the devices. 
    By analizing the requirement analisis we can get the different devices and how their values will be in order to have the best
    html component that allow us to map those values.<br><br>
    From the requirement analysis it is underlined:
    <table style="width:100%" border="1">
        <tr>
            <td style="width:50%">
                <h4>Thermometer</h4>
                <ul>
                    <li><b>Value</b>: floating point continuous value;</li>
                    <li><b>Range</b>: for the temperature no range is specified;</li>
                    <li><b>Needs output</b>: yes</li>
                    <li><b>Needs input</b>: yes</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="width:50%">
                <h4>Sonar</h4>
                <ul>
                    <li><b>Value</b>: integer continuous value;</li>
                    <li><b>Range</b>: for the sonar power no range is specified;</li>
                    <li><b>Needs output</b>: yes</li>
                    <li><b>Needs input</b>: yes</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="width:50%">
                <h4>WeightSensor</h4>
                <ul>
                    <li><b>Value</b>: floating point continuous value;</li>
                    <li><b>Range</b>: for the weight limit no value is gives;</li>
                    <li><b>Needs output</b>: yes</li>
                    <li><b>Needs input</b>: yes</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td style="width:50%">
                <h4>Fan</h4>
                <ul>
                    <li><b>Value</b>: boolean value;</li>
                    <li><b>Range</b>: the fan can only be "ON" or "OFF";</li>
                    <li><b>Needs output</b>: yes</li>
                    <li><b>Needs input</b>: no</li>
                </ul>
            </td>
        </tr>
        </table>

        <h3>GUI components</h3>

        We need components that is able to map the value of the devices. 
        We decided to go for a <ks>slider</ks> component instead of wrtiting the value in a textbox in order to simulate the costant increasing and decreasing of the information 
        read by the devices if they were not virtual.

        <h3>Interaction</h3>

        Websockets have been used to create a virtual environment where the devices are able to send/receive information to/from whoever is subscribed to the
        websocket group.
        <br>
        <h5>From server side</h5>
        Django allow us to create a python module to automatically handle websocket creation and management, to handle messages 
        we created one <a href="https://github.com/LM-96/ParkManagerService/tree/main/it.unibo.webServerTest/src/devices/consumers" target="code"><ks>consumer</ks></a> for device. This class is the medium between the sender and the receivers. Each consumer handle messages
        coming from on websocket group and manage to send it to the others connected to that websocket.
        <h5>From view side</h5>
        <a href="https://github.com/LM-96/ParkManagerService/tree/main/it.unibo.webServerTest/src/static/js" target="code">Javascript</a> will handle the connection to the websocket and will send/receive the deta and update the relative view.
        Each time a slider is moved the script relative to the slider will write in the websocket and each time a message is received the script reads it and updates the slider value and a text box with the correct value.

        <h3>State</h3>
        In order to maintain a consistent value during all the usages of the devices virtual environment we created a singleton class that keeps track of the 
        current value for the four devices. The consuemr will send the current value of the relative device to the websocket each time someone connect to it so who connects will be updated about the last changes.
        The state is updated by the consumer each time a message is sent to the websocket.
        Before the value is updated is parsed in order to read only the interested value that we decided to send with key "data".

        <h3>Final Result</h3>

        <center><img src="../img/devices.png" style="max-width:100%" alt="devicesGUI" /></center>

        <h3>Testing</h3>
        For testing we used Pytest a full-featured Python testing tool. 
        This test was build in order to verify using the virtual devuces the correct functioning of the QAKActors. 
        Four random value, chosed within the upper and lower bownd, are sent to a websocket and after few seconds a value is read 
        from the Coap actor and the two values are compared, if they are equal the test is passed, failed otherwise.
        The <a href="https://github.com/LM-96/ParkManagerService/blob/main/it.unibo.webServerTest/src/devices_pytest.py" target="code">file</a> for testing comprehends one test for each
        device (thermometer, weight sensor, sonar, fan), also we tested the scenario from requirement where the fan must turn on when the temperature exceeds the limit. We managed to do so by sending the minimum and the maximum temperature value
        in order to turn on and off the fan for a couple of time.
        
</div>
 
 
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
-->
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
By studentName email: student@studio.unibo.it  
<img src="./img/emiglio.png" alt="mbot" width="15%" height="15%">
</div> 
</body>
</html>